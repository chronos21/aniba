(this.webpackJsonpaniba_react=this.webpackJsonpaniba_react||[]).push([[0],{39:function(e,t,a){e.exports=a(69)},44:function(e,t,a){},69:function(e,t,a){"use strict";a.r(t);var n=a(0),c=a.n(n),r=a(30),l=a.n(r),s=(a(44),a(2)),i=a(11),o=a(3),u=function(){var e=Object(n.useState)(""),t=Object(s.a)(e,2),a=t[0],r=t[1],l=Object(i.g)();return c.a.createElement("div",{id:"app-bar"},c.a.createElement("div",{className:"ui container small secondary menu"},c.a.createElement(o.b,{className:"item active",to:"/"},"H"),c.a.createElement("div",{className:"item",id:"search-bar"},c.a.createElement("form",{action:"/search/",method:"GET",className:"ui icon input",onSubmit:function(e){return function(e){e.preventDefault(),l.push("/search/".concat(a))}(e)}},c.a.createElement("input",{type:"text",name:"q",placeholder:"Search anime titles...",value:a,onChange:function(e){return r(e.target.value)}}),c.a.createElement("i",{className:"search link icon"})))))},m=a(1),d=a.n(m),p=a(14),f=a(5),h=a(33),E=a(34),b=a(37),v=a(35),g=a(38),N=a(13),O=a.n(N),j=function(e){return e.data.img||e.data.Show?c.a.createElement("div",{className:"grid-item"},c.a.createElement(o.b,{className:"jumper",to:e.data.href?e.data.href:"/"+e.data.Episode.uri}),e.data.releasedAt&&c.a.createElement("div",{className:"time"},c.a.createElement("p",null,O()(e.data.releasedAt).fromNow())),c.a.createElement("div",{className:"ui placeholder"},c.a.createElement("div",{className:"image"},c.a.createElement("img",{src:e.data.img||e.data.Show.thumbnailUrl,alt:"grid-cover"}))),c.a.createElement("div",{className:"pl-5 mt-5"},c.a.createElement("p",{className:"f-bold ellipsis"},e.data.parentId||e.data.title),c.a.createElement("p",{className:"fs-0 ellipsis"},e.data.episodes||e.data.title))):c.a.createElement("div",null)},w=function(){return c.a.createElement("div",{className:"text-center pt-20"},c.a.createElement("div",{className:"lds-ring"},c.a.createElement("div",null),c.a.createElement("div",null),c.a.createElement("div",null),c.a.createElement("div",null)))},y=function(e){var t=c.a.createRef();function a(e){"right"===e?t.current.scrollLeft+=400:t.current.scrollLeft-=400}return c.a.createElement("div",{className:"grid-list"},c.a.createElement("div",{className:"float-right control hide-xs"},c.a.createElement("span",{onClick:function(){return a("left")}},"\u2039"),c.a.createElement("span",{onClick:function(){return a("right")}},"\u203a")),c.a.createElement("h3",{className:"title"},e.title),e.data&&0!==e.data.length?c.a.createElement("div",{className:"grid-container",ref:t},e.data.map((function(e){return c.a.createElement(j,{key:e.id||e._id||e.title,data:e})})),c.a.createElement("div",{className:"grid-spacer"},c.a.createElement("img",{src:"ic_launcher48.png",alt:"spacer"}))):c.a.createElement("div",{className:"pt-20"},c.a.createElement(w,null)))},x=a(9),S=a.n(x);function k(e){return I.apply(this,arguments)}function I(){return(I=Object(f.a)(d.a.mark((function e(t){var a,n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,S.a.get("".concat("","/api/home?json=true&").concat(t));case 3:return a=e.sent,n=a.data,e.abrupt("return",n);case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})))).apply(this,arguments)}function _(){return(_=Object(f.a)(d.a.mark((function e(){var t,a;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,S.a.get("".concat("","/api/stats/home/new"));case 3:return t=e.sent,a=t.data,e.abrupt("return",a);case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})))).apply(this,arguments)}function C(){return(C=Object(f.a)(d.a.mark((function e(t){var a,n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,S.a.post("".concat("","/api/stats/home/new"),t);case 3:return a=e.sent,n=a.data,e.abrupt("return",n);case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})))).apply(this,arguments)}function L(){return(L=Object(f.a)(d.a.mark((function e(t){var a,n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,S.a.get("".concat("","/api/episodes/").concat(t,"?json=true"));case 3:return a=e.sent,n=a.data,e.abrupt("return",n.data);case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})))).apply(this,arguments)}function T(){return(T=Object(f.a)(d.a.mark((function e(t){var a,n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,S.a.get("".concat("","/api/search?json=true&q=").concat(t));case 3:return a=e.sent,n=a.data,e.abrupt("return",n.data);case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})))).apply(this,arguments)}function A(){return(A=Object(f.a)(d.a.mark((function e(t){var a,n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,S.a.get("".concat("","/api/series/").concat(t,"?json=true"));case 3:return a=e.sent,n=a.data,e.abrupt("return",n.data);case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})))).apply(this,arguments)}function D(){return(D=Object(f.a)(d.a.mark((function e(t){var a,n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,S.a.get("".concat("","/api/stats/").concat(t));case 3:return a=e.sent,n=a.data,e.abrupt("return",n);case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})))).apply(this,arguments)}function J(){return(J=Object(f.a)(d.a.mark((function e(t,a){var n,c;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,S.a.delete("".concat("","/api/stats/").concat(t,"?").concat(a));case 3:return n=e.sent,c=n.data,e.abrupt("return",c.data);case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})))).apply(this,arguments)}function R(){return(R=Object(f.a)(d.a.mark((function e(t){var a,n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,S.a.get("".concat("","/api/comments/").concat(t));case 3:return a=e.sent,n=a.data,e.abrupt("return",n.comments);case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})))).apply(this,arguments)}function W(){return(W=Object(f.a)(d.a.mark((function e(t,a){var n,c,r,l;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=localStorage.getItem("authorId"))||(n=localStorage.setItem("authorId",Date.now())),c={authorId:n,parentId:t,text:a},e.prev=3,e.next=6,S.a.post("".concat("","/api/comments/").concat(t),c);case 6:return r=e.sent,l=r.data,e.abrupt("return",l.comment);case 11:e.prev=11,e.t0=e.catch(3),console.log(e.t0);case 14:case"end":return e.stop()}}),e,null,[[3,11]])})))).apply(this,arguments)}var q=function(e){function t(){var e,a;Object(h.a)(this,t);for(var n=arguments.length,c=new Array(n),r=0;r<n;r++)c[r]=arguments[r];return(a=Object(b.a)(this,(e=Object(v.a)(t)).call.apply(e,[this].concat(c)))).state={newReleases:[],featured:[],isLoading:!1,featuredTotal:0},a.fecthNewReleases=Object(f.a)(d.a.mark((function e(){var t,n,c,r,l;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a.setState({isLoading:!0}),t=localStorage.getItem("home"),n=localStorage.getItem("homeExp"),!((Date.now()-n)/1e3<=360&&t)){e.next=7;break}t=JSON.parse(t),e.next=15;break;case 7:return e.next=9,k("type=new_releases");case 9:c=e.sent,r=c.data,l=c.total,t=r,a.setState({featuredTotal:l}),localStorage.setItem("homeExp",Date.now());case 15:a.setState({newReleases:Object(p.a)(t),isLoading:!1});case 16:case"end":return e.stop()}}),e)}))),a.fetchFeatured=Object(f.a)(d.a.mark((function e(){var t,n,c,r,l,s;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=JSON.parse(localStorage.getItem("featured")),n=localStorage.getItem("featuredExp"),c=localStorage.getItem("featuredTotal"),c=Math.max(a.state.featuredTotal,Number(c)),isNaN(Number(c))&&(c=4),!((Date.now()-n)/24e4<=1&&t&&t.length===Number(c))){e.next=9;break}a.setState({featured:t,isLoading:!1}),e.next=21;break;case 9:r=0;case 10:if(!(r<c)){e.next=21;break}return a.setState({isLoading:!0}),e.next=14,k("type=browse&limit=1&skip=".concat(r));case 14:l=e.sent,s=l.data,a.setState({featured:[].concat(Object(p.a)(a.state.featured),Object(p.a)(s)),isLoading:!1}),localStorage.setItem("featuredExp",Date.now());case 18:r++,e.next=10;break;case 21:a.setState({featuredTotal:c});case 22:case"end":return e.stop()}}),e)}))),a}return Object(g.a)(t,e),Object(E.a)(t,[{key:"componentDidMount",value:function(){var e=Object(f.a)(d.a.mark((function e(){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return document.title="aniba - Watch free anime without ads!",e.next=3,this.fecthNewReleases();case 3:return e.next=5,this.fetchFeatured();case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"componentWillUnmount",value:function(){localStorage.setItem("featuredTotal",this.state.featuredTotal),this.state.newReleases.length>0&&localStorage.setItem("home",JSON.stringify(this.state.newReleases)),this.state.featured.length>0&&localStorage.setItem("featured",JSON.stringify(this.state.featured))}},{key:"render",value:function(){return c.a.createElement("div",{className:"mb-40 pt-10"},this.state.newReleases.map((function(e){return c.a.createElement(y,{data:e.content,title:e.title,key:e._id})})),this.state.featured.map((function(e){return c.a.createElement(y,{data:e.content,title:e.title,key:e._id})})),this.state.isLoading&&c.a.createElement(w,null))}}]),t}(n.Component),F=function(e){return c.a.createElement("div",{className:"comment"},c.a.createElement("span",{className:"avatar"},c.a.createElement("img",{src:"/avatar.jpg",alt:"avatar"})),c.a.createElement("div",{className:"content"},c.a.createElement("span",{className:"author"},"Anonymous")," [",e.data.authorId.substring(8),"]",c.a.createElement("div",{className:"metadata"},c.a.createElement("span",{className:"date"},O()(e.data.createdAt).fromNow())),c.a.createElement("div",{className:"text"},e.data.text)))},H=function(e){var t=Object(n.useState)([]),a=Object(s.a)(t,2),r=a[0],l=a[1],i=Object(n.useState)(!1),o=Object(s.a)(i,2),u=o[0],m=o[1],d=Object(n.useState)(""),f=Object(s.a)(d,2),h=f[0],E=f[1],b=Object(n.useState)(!1),v=Object(s.a)(b,2),g=v[0],N=v[1];function O(t){g||(N(!0),t.preventDefault(),function(e,t){return W.apply(this,arguments)}(e.parentId,h).then((function(e){l([].concat(Object(p.a)(r),[e])),E(""),N(!1)})))}return Object(n.useEffect)((function(){function t(){(function(e){return R.apply(this,arguments)})(e.parentId).then((function(e){l(e),m(!1)})).catch((function(e){m(!1),console.log(e)}))}m(!0),t();var a=setInterval((function(){return t()}),45e3);return function(){return clearInterval(a)}}),[e.parentId]),u?c.a.createElement(w,null):c.a.createElement("div",{className:"mb-40"},c.a.createElement("h3",{className:"ui dividing header"},"Comments"),r&&0!==r.length?c.a.createElement("div",{className:"ui comments"},r.map((function(e){return c.a.createElement(F,{data:e,key:e._id})}))):c.a.createElement("p",{className:"pb-20"},"There's no comment"),c.a.createElement("form",{className:"ui reply form",id:"comment-form",onSubmit:function(e){return O(e)}},c.a.createElement("div",{className:"field"},c.a.createElement("textarea",{id:"comment-box",rows:"5",onChange:function(e){return E(e.target.value)},value:h})),c.a.createElement("button",{className:"ui blue labeled submit icon button"},c.a.createElement("i",{className:"icon edit"})," Add Reply"),g&&c.a.createElement("span",null," Processing")))},K=function(){var e=Object(n.useState)({}),t=Object(s.a)(e,2),a=t[0],r=t[1],l=Object(n.useState)(!0),u=Object(s.a)(l,2),m=u[0],d=u[1],p=Object(i.h)().episodeId;return Object(n.useEffect)((function(){d(!0);var e=localStorage.getItem(p);return e?(e=JSON.parse(e),r(e),d(!1)):function(e){return L.apply(this,arguments)}(p).then((function(t){r(t),d(!1),console.log(t),e=t,document.title="Watch ".concat(t.title," for free")})).catch((function(e){d(!1),console.log(e)})),function(){e&&localStorage.setItem(p,JSON.stringify(e))}}),[p]),m?c.a.createElement(w,null):m||a.title?c.a.createElement("div",null,c.a.createElement("div",{className:"ui container"},c.a.createElement("div",null,c.a.createElement(o.b,{to:a.all},"All Episodes"),c.a.createElement("span",null," | "),c.a.createElement(o.b,{to:a.prev},"Previous"),c.a.createElement("span",null," | "),c.a.createElement(o.b,{to:a.next},"Next")),c.a.createElement("h3",{className:"ui header mb-4"},a.title),c.a.createElement("div",{className:"video-container"},a.video&&c.a.createElement("video",{src:"".concat("","/api/video?url=").concat(a.video,"&embed=").concat(a.embed),width:"100%",height:"100%",controls:!0})),p&&!m&&c.a.createElement(H,{parentId:p}))):c.a.createElement(i.a,{to:"/"})},M=function(e){return c.a.createElement("div",{className:"ui relaxed selection list"},e.data.map((function(e){return c.a.createElement("div",{className:"item",key:e.href},c.a.createElement("div",{className:"content"},c.a.createElement(o.b,{className:"header",to:e.href},e.title),c.a.createElement("div",{className:"description"},e.subtitle)))})))},P=function(){var e=Object(n.useState)({}),t=Object(s.a)(e,2),a=t[0],r=t[1],l=Object(n.useState)(!0),o=Object(s.a)(l,2),u=o[0],m=o[1],d=Object(i.h)().seriesId;return Object(n.useEffect)((function(){m(!0),function(e){return A.apply(this,arguments)}(d).then((function(e){r(e),document.title="Watch ".concat(e.title," for free without ads"),m(!1)})).catch((function(e){console.log(e)}))}),[d]),u||a.title?u?c.a.createElement(w,null):c.a.createElement("div",null,c.a.createElement("div",{className:"ui container mb-40"},c.a.createElement("div",{className:"ui grid"},c.a.createElement("div",{className:"large screen only four wide column"},c.a.createElement("img",{className:"series-img",src:a.img,alt:"cover"})),c.a.createElement("div",{className:"large screen only twelve wide column"},c.a.createElement("h1",null,a.title),c.a.createElement("p",null,a.status),c.a.createElement("p",null,a.desc)),c.a.createElement("div",{className:"mobile only sixteen wide column"},c.a.createElement("div",{className:"series-img-m ui placeholder"},c.a.createElement("div",{className:"ui image"},c.a.createElement("img",{width:"100%",height:"200",src:a.img,alt:"cover"}))),c.a.createElement("h1",null,a.title),c.a.createElement("p",null,a.status),c.a.createElement("p",null,a.desc))),a&&a.episodes&&c.a.createElement(M,{data:a.episodes}))):c.a.createElement(i.a,{to:"/"})},U=function(e){return c.a.createElement("div",{className:"wrap-item"},c.a.createElement("div",{className:"ui placeholder h-100"},c.a.createElement("div",{className:"image h-100"},c.a.createElement("img",{src:e.data.img,alt:"cover",height:"300"}))),c.a.createElement(o.b,{className:"wrap-info",to:e.data.href},c.a.createElement("div",null,c.a.createElement("p",{className:"f-bold ellipsis"},e.data.title),c.a.createElement("p",{className:"ellipsis"},e.data.episodes),c.a.createElement("p",{className:"ellipsis"},e.data.status.replace("Status : ","")))))},z=function(e){return c.a.createElement("div",{className:"grid-wrap"},e.data&&e.data.map((function(e){return c.a.createElement(U,{data:e,key:e.href})})))},B=function(){var e=Object(n.useState)([]),t=Object(s.a)(e,2),a=t[0],r=t[1],l=Object(n.useState)(!0),o=Object(s.a)(l,2),u=o[0],m=o[1],d=Object(i.h)().searchKey;return Object(n.useEffect)((function(){m(!0),function(e){return T.apply(this,arguments)}(d).then((function(e){r(e),m(!1),document.title="results for: "+d})).catch((function(e){console.log(e),m(!1)}))}),[d]),c.a.createElement("div",null,c.a.createElement("div",{className:"ui container pb-10"},c.a.createElement("h3",null,"results for: ",d)),!u&&a&&0===a.length&&c.a.createElement("p",{className:"text-center pt-10"},"There's no result"),u?c.a.createElement(w,null):c.a.createElement(z,{data:a}))},G=function(){var e=Object(n.useState)([]),t=Object(s.a)(e,2),a=t[0],r=t[1],l=Object(n.useState)(!1),u=Object(s.a)(l,2),m=u[0],d=u[1],p=Object(i.h)().type,f=Object(n.useState)(!1),h=Object(s.a)(f,2),E=h[0],b=h[1];if(Object(n.useEffect)((function(){d(!0),function(e){return D.apply(this,arguments)}(p).then((function(e){r(e.data),d(!1)})).catch((function(e){console.log(e),d(!1)}))}),[p]),!m&!a)return c.a.createElement(i.a,{to:"/"});function v(e,t,n){b(!0),function(e,t){return J.apply(this,arguments)}(e,"".concat(t,"=").concat(n)).then((function(e){e.deletedCount>0&&r(a.filter((function(e){return e._id!==n}))),b(!1)})).catch((function(){return b(!1)}))}return c.a.createElement("div",{className:"ui container mb-40"},E&&c.a.createElement("p",{className:"fixed-right"},"(processing...)"),c.a.createElement("div",{className:"five ui buttons pb-20"},c.a.createElement(o.b,{to:"log",className:"ui button"},"Log"),c.a.createElement(o.b,{to:"comment",className:"ui button"},"Comment"),c.a.createElement(o.b,{to:"episode",className:"ui button"},"Episode"),c.a.createElement(o.b,{to:"series",className:"ui button"},"Seires"),c.a.createElement(o.b,{to:"home",className:"ui button"},"Home")),m?c.a.createElement(w,null):a&&c.a.createElement("div",null,c.a.createElement("h3",null,"stats: ",p),c.a.createElement("ol",{className:"ui list"},a.map((function(e){return c.a.createElement("li",{key:e._id},e._id,c.a.createElement("span",{onClick:function(){return v(p,"_id",e._id)},className:"float-right cursor-pointer"},"del"),c.a.createElement("ol",null,Object.keys(e).map((function(t,a){return"_id"!==t?t.includes("At")?c.a.createElement("li",{key:a},t,": ",O()(e[t]).fromNow()):c.a.createElement("li",{key:a},t,": ",JSON.stringify(e[t])):c.a.createElement("span",{key:a})}))))})))))},Q=a(16),V=a(36),X=function(){var e=Object(n.useState)({}),t=Object(s.a)(e,2),a=t[0],r=t[1],l=Object(n.useState)(!1),i=Object(s.a)(l,2),o=i[0],u=i[1],m=Object(n.useState)([]),d=Object(s.a)(m,2),p=d[0],f=d[1],h=Object(n.useState)(!1),E=Object(s.a)(h,2),b=E[0],v=E[1];Object(n.useEffect)((function(){u(!0),function(){return _.apply(this,arguments)}().then((function(e){f(e.data),u(!1)}))}),[]);function g(e){if(v(!0),e.preventDefault(),!b){var t={};console.log(a),function(e){return C.apply(this,arguments)}(a).then((function(e){e&&r(t),v(!1)}))}}return o?c.a.createElement(w,null):c.a.createElement("div",{className:"ui container mb-40"},b&&c.a.createElement("p",{className:"fixed-right"},"(processing...)"),c.a.createElement("h3",{className:"ui dividing header"},"Add a new home content"),c.a.createElement("form",{className:"ui form",onSubmit:function(e){return g(e)}},p&&p.map((function(e){return c.a.createElement("div",{key:e,className:"field"},c.a.createElement("label",{className:"capitalize"},e),c.a.createElement("textarea",{type:"text",value:a[e]||"",name:e,rows:"3",onChange:function(e){return function(e){var t=e.target,n=t.name,c=t.value;r(Object(V.a)({},a,Object(Q.a)({},n,c)))}(e)}}))})),c.a.createElement("button",{className:"ui button",type:"submit"},"Submit")))};var Y=function(){return c.a.createElement(o.a,null,c.a.createElement("div",null,c.a.createElement(u,null),c.a.createElement("div",{className:"spacer"}),c.a.createElement(i.d,null,c.a.createElement(i.b,{path:"/stats/home/new"},c.a.createElement(X,null)),c.a.createElement(i.b,{path:"/stats/:type"},c.a.createElement(G,null)),c.a.createElement(i.b,{path:"/series/:seriesId"},c.a.createElement(P,null)),c.a.createElement(i.b,{path:"/search/:searchKey"},c.a.createElement(B,null)),c.a.createElement(i.b,{path:"/:episodeId"},c.a.createElement(K,null)),c.a.createElement(i.b,{path:"/"},c.a.createElement(q,null)))))};l.a.render(c.a.createElement(Y,null),document.getElementById("root"))}},[[39,1,2]]]);
//# sourceMappingURL=main.682ff8c7.chunk.js.map